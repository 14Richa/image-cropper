!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("react")):"function"==typeof define&&define.amd?define(["react"],e):"object"==typeof exports?exports.ReactCrop=e(require("react")):t.ReactCrop=e(t.react)}(this,function(t){return function(t){function e(s){if(i[s])return i[s].exports;var n=i[s]={exports:{},id:s,loaded:!1};return t[s].call(n.exports,n,n.exports,e),n.loaded=!0,n.exports}var i={};return e.m=t,e.c=i,e.p="/",e(0)}([function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var n=i(1),o=s(n),r=i(2),a=s(r),h=i(3),l=s(h);i(4),e["default"]=o["default"].createClass({displayName:"Cropper",propTypes:{width:o["default"].PropTypes.number.isRequired,height:o["default"].PropTypes.number.isRequired,center:o["default"].PropTypes.bool,image:o["default"].PropTypes.any,widthLabel:o["default"].PropTypes.string,heightLabel:o["default"].PropTypes.string,offsetXLabel:o["default"].PropTypes.string,offsetYLabel:o["default"].PropTypes.string,onImageLoaded:o["default"].PropTypes.func,minConstraints:o["default"].PropTypes.arrayOf(o["default"].PropTypes.number)},getDefaultProps:function(){return{center:!1,width:"Width",height:"Height",offsetXLabel:"Offset X",offsetYLabel:"Offset Y"}},getInitialState:function(){return{imageLoaded:!1,width:this.props.width,height:this.props.height,url:window.URL.createObjectURL(this.props.image)}},componentWillReceiveProps:function(t){this.props.image!==t.image&&this.setState({url:window.URL.createObjectURL(t.image),imageLoaded:!1})},shouldComponentUpdate:function(t,e){var i=this.props.image;return t.image.size!==i.size||t.image.name!==i.name||t.image.type!==i.type||e.imageLoaded!==this.state.imageLoaded},onLoad:function(t){var e=this,i=this.refs.box.getBoundingClientRect();this.setState({imageLoaded:!0,width:i.width,height:i.height},function(){var t=e.refs.image;e.props.onImageLoaded&&e.props.onImageLoaded(t)})},cropImage:function(){var t=this;return new Promise(function(e,i){var s=new Image;s.onload=function(){var i=t.refs.canvas,s=t.refs.image,n=i.getContext("2d"),o=s.naturalWidth/t.state.width,r=s.naturalHeight/t.state.height,a=1>o?0:t.state.offset.left*o,h=1>r?0:t.state.offset.top*r,p=1>o?s.naturalWidth:t.state.dimensions.width*o,u=1>r?s.naturalHeight:t.state.dimensions.height*r,d=1>o?Math.floor((t.state.dimensions.width-s.naturalWidth)/2):0,c=1>r?Math.floor((t.state.dimensions.height-s.naturalHeight)/2):0,f=1>o?s.naturalWidth:t.props.width,g=1>r?s.naturalHeight:t.props.height;n.clearRect(0,0,t.props.width,t.props.height),n.drawImage(s,a,h,p,u,d,c,f,g),e(l["default"](i.toDataURL()))},s.src=window.URL.createObjectURL(t.props.image)})},onChange:function(t,e){this.setState({offset:t,dimensions:e})},render:function(){return o["default"].createElement("div",{ref:"box",className:"Cropper",style:{minWidth:this.props.width,minHeight:this.props.height}},o["default"].createElement("canvas",{className:"Cropper-canvas",ref:"canvas",width:this.props.width,height:this.props.height}),o["default"].createElement("img",{ref:"image",src:this.state.url,className:"Cropper-image",onLoad:this.onLoad,style:{top:this.state.height/2}}),this.state.imageLoaded&&o["default"].createElement("div",{className:"box"},o["default"].createElement(a["default"],{aspectRatio:this.props.width/this.props.height,width:this.state.width,height:this.state.height,minConstraints:this.props.minConstraints,onChange:this.onChange,widthLabel:this.props.widthLabel,heightLabel:this.props.heightLabel,offsetXLabel:this.props.offsetXLabel,offsetYLabel:this.props.offsetYLabel},o["default"].createElement("div",{className:"Cropper-box"}))))}})},function(e,i){e.exports=t},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},o=function(){function t(t,e){var i=[],s=!0,n=!1,o=void 0;try{for(var r,a=t[Symbol.iterator]();!(s=(r=a.next()).done)&&(i.push(r.value),!e||i.length!==e);s=!0);}catch(h){n=!0,o=h}finally{try{!s&&a["return"]&&a["return"]()}finally{if(n)throw o}}return i}return function(e,i){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),r=i(1),a=s(r);e["default"]=a["default"].createClass({displayName:"DraggableResizableBox",propTypes:{aspectRatio:a["default"].PropTypes.number.isRequired,width:a["default"].PropTypes.number.isRequired,height:a["default"].PropTypes.number.isRequired,onChange:a["default"].PropTypes.func,offset:a["default"].PropTypes.array,minConstraints:a["default"].PropTypes.array,children:a["default"].PropTypes.node,widthLabel:a["default"].PropTypes.string,heightLabel:a["default"].PropTypes.string,offsetXLabel:a["default"].PropTypes.string,offsetYLabel:a["default"].PropTypes.string},getDefaultProps:function(){return{widthLabel:"Width",heightLabel:"Height",offsetXLabel:"Offset X",offsetYLabel:"Offset Y"}},getInitialState:function(){var t=this.preserveAspectRatio(this.props.width,this.props.height),e=o(t,2),i=e[0],s=e[1],n=(this.props.height-s)/2,r=(this.props.width-i)/2;return{top:n,left:r,bottom:n,right:r,width:i,height:s}},componentDidMount:function(){document.addEventListener("mousemove",this.eventMove),document.addEventListener("mouseup",this.eventEnd),document.addEventListener("touchmove",this.eventMove),document.addEventListener("touchend",this.eventEnd),document.addEventListener("keydown",this.handleKey),this.props.onChange({top:this.state.top,left:this.state.left},{width:this.state.width,height:this.state.height})},componentWillUnmount:function(){document.removeEventListener("mousemove",this.eventMove),document.removeEventListener("mouseup",this.eventEnd),document.removeEventListener("touchmove",this.eventMove),document.removeEventListener("touchend",this.eventEnd),document.removeEventListener("keydown",this.handleKey)},calculateDimensions:function(t){var e=t.top,i=t.left,s=t.bottom,n=t.right;return{width:this.props.width-i-n,height:this.props.height-e-s}},preserveAspectRatio:function(t,e){this.props.minConstraints&&(t=Math.max(t,this.props.minConstraints[0]),e=Math.max(e,this.props.minConstraints[1]));var i=t/e;return i<this.props.aspectRatio?[t,t/this.props.aspectRatio]:i>this.props.aspectRatio?[e*this.props.aspectRatio,e]:[t,e]},constrainBoundary:function(t){return 0>t?0:t},getClientCoordinates:function(t){return t.touches?{clientX:t.touches[0].clientX,clientY:t.touches[0].clientY}:{clientX:t.clientX,clientY:t.clientY}},eventMove:function(t){this.state.resizing?this.onResize(t):this.state.moving&&this.eventMoveBox(t)},eventEnd:function(t){this.state.resizing?this.stopResize(t):this.state.moving&&this.stopMove(t)},startResize:function(t,e){e.stopPropagation(),e.preventDefault(),this.setState({resizing:!0,corner:t})},stopResize:function(){this.setState({resizing:!1})},nw:function(t,e){var i=n({},this.state,{top:this.constrainBoundary(t.clientY-e.top),left:this.constrainBoundary(t.clientX-e.left)}),s=this.calculateDimensions(i),r=this.preserveAspectRatio(s.width,s.height),a=o(r,2),h=a[0],l=a[1];return i.top=this.props.height-i.bottom-l,i.left=this.props.width-i.right-h,i},ne:function(t,e){var i=n({},this.state,{top:this.constrainBoundary(t.clientY-e.top),right:this.constrainBoundary(e.right-t.clientX)}),s=this.calculateDimensions(i),r=this.preserveAspectRatio(s.width,s.height),a=o(r,2),h=a[0],l=a[1];return i.top=this.props.height-i.bottom-l,i.right=this.props.width-i.left-h,i},se:function(t,e){var i=n({},this.state,{bottom:this.constrainBoundary(e.bottom-t.clientY),right:this.constrainBoundary(e.right-t.clientX)}),s=this.calculateDimensions(i),r=this.preserveAspectRatio(s.width,s.height),a=o(r,2),h=a[0],l=a[1];return i.bottom=this.props.height-i.top-l,i.right=this.props.width-i.left-h,i},sw:function(t,e){var i=n({},this.state,{bottom:this.constrainBoundary(e.bottom-t.clientY),left:this.constrainBoundary(t.clientX-e.left)}),s=this.calculateDimensions(i),r=this.preserveAspectRatio(s.width,s.height),a=o(r,2),h=a[0],l=a[1];return i.bottom=this.props.height-i.top-l,i.left=this.props.width-i.right-h,i},onResize:function(t){var e=this.refs.box.parentElement.parentElement.getBoundingClientRect(),i=this.getClientCoordinates(t),s=this[this.state.corner](i,e);this.resize(s,i)},controlsResize:function(t){var e=this.refs.box.parentElement.parentElement.getBoundingClientRect(),i="width"===t.target.name?+t.target.value:+t.target.value*this.props.aspectRatio,s="height"===t.target.name?+t.target.value:+t.target.value/this.props.aspectRatio,o=this.preserveAspectRatio(i,s);if(i=o[0],s=o[1],!(i>e.width-this.state.left||s>e.height-this.state.top)){var r=this.state.width-i,a=this.state.height-s,h=n({},this.state,{right:this.state.right+r,bottom:this.state.bottom+a}),l={clientX:e.right-h.right,clientY:e.bottom-h.bottom};this.resize(h,l)}},resize:function(t,e){var i=this,s=this.calculateDimensions(t),o=s.width!==this.state.width,r=s.height!==this.state.height;(o||r)&&this.setState(n({},e,t,s),function(){i.props.onChange({top:t.top,left:t.left},s)})},startMove:function(t){var e=this.getClientCoordinates(t),i=e.clientX,s=e.clientY;this.setState({moving:!0,clientX:i,clientY:s})},stopMove:function(t){this.setState({moving:!1})},eventMoveBox:function(t){t.preventDefault();var e=this.getClientCoordinates(t),i=e.clientX,s=e.clientY,n=i-this.state.clientX,o=s-this.state.clientY;this.moveBox(i,s,n,o)},controlsMoveBox:function(t){var e="x"===t.target.name?t.target.value-this.state.left:0,i="y"===t.target.name?t.target.value-this.state.top:0;this.moveBox(0,0,e,i)},moveBox:function(t,e,i,s){var o=this,r={top:this.constrainBoundary(this.state.top+s),left:this.constrainBoundary(this.state.left+i),bottom:this.constrainBoundary(this.state.bottom-s),right:this.constrainBoundary(this.state.right-i)};r.top||(r.bottom=this.props.height-this.state.height),r.bottom||(r.top=this.props.height-this.state.height),r.left||(r.right=this.props.width-this.state.width),r.right||(r.left=this.props.width-this.state.width),this.setState(n({},{clientX:t,clientY:e},r),function(){o.props.onChange({top:r.top,left:r.left},o.calculateDimensions(r))})},keyboardResize:function(t){if(!(this.state.right-t<0||this.state.bottom-t<0)){var e=this.preserveAspectRatio(this.state.width+t,this.state.height+t),i=o(e,2),s=i[0],n=i[1],r=s-this.state.width,a=n-this.state.height;this.setState({bottom:this.state.bottom-a,right:this.state.right-r,width:s,height:n})}},handleKey:function(t){t.shiftKey?"ArrowUp"===t.key||38===t.keyCode?(this.keyboardResize(-10),t.preventDefault()):"ArrowDown"===t.key||40===t.keyCode?(this.keyboardResize(10),t.preventDefault()):"ArrowLeft"===t.key||37===t.keyCode?(this.keyboardResize(-10),t.preventDefault()):("ArrowRight"===t.key||39===t.keyCode)&&(this.keyboardResize(10),t.preventDefault()):"ArrowUp"===t.key||38===t.keyCode?(this.moveBox(this.state.clientX,this.state.clientY,0,-10),t.preventDefault()):"ArrowDown"===t.key||40===t.keyCode?(this.moveBox(this.state.clientX,this.state.clientY,0,10),t.preventDefault()):"ArrowLeft"===t.key||37===t.keyCode?(this.moveBox(this.state.clientX,this.state.clientY,-10,0),t.preventDefault()):("ArrowRight"===t.key||39===t.keyCode)&&(this.moveBox(this.state.clientX,this.state.clientY,10,0),t.preventDefault())},render:function(){var t={position:"absolute",top:this.state.top,left:this.state.left,right:this.state.right,bottom:this.state.bottom},e=this.calculateDimensions(this.state),i=e.width,s=e.height,n={height:this.state.top},o={height:this.state.bottom},r={top:this.state.top,right:i+this.state.right,bottom:this.state.bottom},h={top:this.state.top,left:i+this.state.left,bottom:this.state.bottom};return a["default"].createElement("div",{ref:"box",className:"DraggableResizable"},a["default"].createElement("div",{className:"DraggableResizable-controls"},a["default"].createElement("label",null,this.props.offsetXLabel,a["default"].createElement("input",{name:"x",value:Math.round(this.state.left),onChange:this.controlsMoveBox,tabIndex:"-1",type:"number"})),a["default"].createElement("label",null,this.props.offsetYLabel,a["default"].createElement("input",{name:"y",value:Math.round(this.state.top),onChange:this.controlsMoveBox,tabIndex:"-1",type:"number"})),a["default"].createElement("label",null,this.props.widthLabel,a["default"].createElement("input",{name:"width",value:Math.round(i),type:"number",tabIndex:"-1",onChange:this.controlsResize})),a["default"].createElement("label",null,this.props.heightLabel,a["default"].createElement("input",{value:Math.round(s),type:"number",name:"height",tabIndex:"-1",onChange:this.controlsResize}))),a["default"].createElement("div",{className:"DraggableResizable-top",style:n}),a["default"].createElement("div",{className:"DraggableResizable-left",style:r}),a["default"].createElement("div",{style:t,onMouseDown:this.startMove,onTouchStart:this.startMove},this.props.children,a["default"].createElement("div",{className:"resize-handle resize-handle-se",onMouseDown:this.startResize.bind(null,"se"),onTouchStart:this.startResize.bind(null,"se")}),a["default"].createElement("div",{className:"resize-handle resize-handle-ne",onMouseDown:this.startResize.bind(null,"ne"),onTouchStart:this.startResize.bind(null,"ne")}),a["default"].createElement("div",{className:"resize-handle resize-handle-sw",onMouseDown:this.startResize.bind(null,"sw"),onTouchStart:this.startResize.bind(null,"sw")}),a["default"].createElement("div",{className:"resize-handle resize-handle-nw",onMouseDown:this.startResize.bind(null,"nw"),onTouchStart:this.startResize.bind(null,"nw")})),a["default"].createElement("div",{className:"DraggableResizable-right",style:h}),a["default"].createElement("div",{className:"DraggableResizable-bottom",style:o}))}})},function(t,e){function i(t){return t.split(";")[0].slice(5)}var s=window.Blob,n=100==new s([new Uint8Array(100)]).size;t.exports=function(t){for(var e=t.split(",")[1],o=atob(e),r=new ArrayBuffer(o.length),a=new Uint8Array(r),h=0;h<o.length;h++)a[h]=o.charCodeAt(h);n||(a=r);var l=new s([a],{type:i(t)});return l.slice=l.slice||l.webkitSlice,l}},function(t,e,i){var s=i(5);"string"==typeof s&&(s=[[t.id,s,""]]);i(7)(s,{});s.locals&&(t.exports=s.locals)},function(t,e,i){e=t.exports=i(6)(),e.push([t.id,".Cropper{position:relative;display:inline-block;max-width:100%;max-height:100%}.box,.Cropper-box{position:absolute;top:0;left:0;bottom:0;right:0}.Cropper-box{cursor:move;border:1px solid #fff}.Cropper-canvas{visibility:hidden;position:absolute}.Cropper-image{vertical-align:middle;max-width:100%;position:relative;transform:translate(-50%,-50%);left:50%}.resize-handle{position:absolute;background-color:#eceeef;border:1px solid #8295ab;width:13px;height:13px;z-index:1}.resize-handle-se{bottom:0;right:0;cursor:nwse-resize;transform:translate(50%,50%)}.resize-handle-ne{right:0;top:0;cursor:nesw-resize;transform:translate(50%,-50%)}.resize-handle-sw{bottom:0;left:0;cursor:nesw-resize;transform:translate(-50%,50%)}.resize-handle-nw{top:0;bottom:0;cursor:nwse-resize;transform:translate(-50%,-50%)}.DraggableResizable{position:relative;width:100%;height:100%}.DraggableResizable-controls{border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px}.DraggableResizable-bottom,.DraggableResizable-left,.DraggableResizable-right,.DraggableResizable-top{position:absolute;background-color:rgba(0,0,0,.7)}.DraggableResizable-top{top:0;left:0;right:0}.DraggableResizable-bottom{bottom:0;left:0;right:0}.DraggableResizable-left{left:0}.DraggableResizable-right{right:0}",""])},function(t,e){t.exports=function(){var t=[];return t.toString=function(){for(var t=[],e=0;e<this.length;e++){var i=this[e];i[2]?t.push("@media "+i[2]+"{"+i[1]+"}"):t.push(i[1])}return t.join("")},t.i=function(e,i){"string"==typeof e&&(e=[[null,e,""]]);for(var s={},n=0;n<this.length;n++){var o=this[n][0];"number"==typeof o&&(s[o]=!0)}for(n=0;n<e.length;n++){var r=e[n];"number"==typeof r[0]&&s[r[0]]||(i&&!r[2]?r[2]=i:i&&(r[2]="("+r[2]+") and ("+i+")"),t.push(r))}},t}},function(t,e,i){function s(t,e){for(var i=0;i<t.length;i++){var s=t[i],n=c[s.id];if(n){n.refs++;for(var o=0;o<n.parts.length;o++)n.parts[o](s.parts[o]);for(;o<s.parts.length;o++)n.parts.push(l(s.parts[o],e))}else{for(var r=[],o=0;o<s.parts.length;o++)r.push(l(s.parts[o],e));c[s.id]={id:s.id,refs:1,parts:r}}}}function n(t){for(var e=[],i={},s=0;s<t.length;s++){var n=t[s],o=n[0],r=n[1],a=n[2],h=n[3],l={css:r,media:a,sourceMap:h};i[o]?i[o].parts.push(l):e.push(i[o]={id:o,parts:[l]})}return e}function o(t,e){var i=m(),s=y[y.length-1];if("top"===t.insertAt)s?s.nextSibling?i.insertBefore(e,s.nextSibling):i.appendChild(e):i.insertBefore(e,i.firstChild),y.push(e);else{if("bottom"!==t.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");i.appendChild(e)}}function r(t){t.parentNode.removeChild(t);var e=y.indexOf(t);e>=0&&y.splice(e,1)}function a(t){var e=document.createElement("style");return e.type="text/css",o(t,e),e}function h(t){var e=document.createElement("link");return e.rel="stylesheet",o(t,e),e}function l(t,e){var i,s,n;if(e.singleton){var o=b++;i=v||(v=a(e)),s=p.bind(null,i,o,!1),n=p.bind(null,i,o,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(i=h(e),s=d.bind(null,i),n=function(){r(i),i.href&&URL.revokeObjectURL(i.href)}):(i=a(e),s=u.bind(null,i),n=function(){r(i)});return s(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;s(t=e)}else n()}}function p(t,e,i,s){var n=i?"":s.css;if(t.styleSheet)t.styleSheet.cssText=w(e,n);else{var o=document.createTextNode(n),r=t.childNodes;r[e]&&t.removeChild(r[e]),r.length?t.insertBefore(o,r[e]):t.appendChild(o)}}function u(t,e){var i=e.css,s=e.media;if(s&&t.setAttribute("media",s),t.styleSheet)t.styleSheet.cssText=i;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(i))}}function d(t,e){var i=e.css,s=e.sourceMap;s&&(i+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(s))))+" */");var n=new Blob([i],{type:"text/css"}),o=t.href;t.href=URL.createObjectURL(n),o&&URL.revokeObjectURL(o)}var c={},f=function(t){var e;return function(){return"undefined"==typeof e&&(e=t.apply(this,arguments)),e}},g=f(function(){return/msie [6-9]\b/.test(window.navigator.userAgent.toLowerCase())}),m=f(function(){return document.head||document.getElementsByTagName("head")[0]}),v=null,b=0,y=[];t.exports=function(t,e){e=e||{},"undefined"==typeof e.singleton&&(e.singleton=g()),"undefined"==typeof e.insertAt&&(e.insertAt="bottom");var i=n(t);return s(i,e),function(t){for(var o=[],r=0;r<i.length;r++){var a=i[r],h=c[a.id];h.refs--,o.push(h)}if(t){var l=n(t);s(l,e)}for(var r=0;r<o.length;r++){var h=o[r];if(0===h.refs){for(var p=0;p<h.parts.length;p++)h.parts[p]();delete c[h.id]}}}};var w=function(){var t=[];return function(e,i){return t[e]=i,t.filter(Boolean).join("\n")}}()}])});
//# sourceMappingURL=react-crop.min.js.map