{"ast":null,"code":"// A few JavaScript Functions for Images and Files\n// Author: Justin Mitchel\n// Source: https://kirr.co/ndywes\n// Convert a Base64-encoded string to a File object\nexport function base64StringtoFile(base64String, filename) {\n  var arr = base64String.split(','),\n      mime = arr[0].match(/:(.*?);/)[1],\n      bstr = atob(arr[1]),\n      n = bstr.length,\n      u8arr = new Uint8Array(n);\n\n  while (n--) {\n    u8arr[n] = bstr.charCodeAt(n);\n  }\n\n  return new File([u8arr], filename, {\n    type: mime\n  });\n} // Download a Base64-encoded file\n\nexport function downloadBase64File(base64Data, filename) {\n  var element = document.createElement('a');\n  element.setAttribute('href', base64Data);\n  element.setAttribute('download', filename);\n  element.style.display = 'none';\n  document.body.appendChild(element);\n  element.click();\n  document.body.removeChild(element);\n} // Extract an Base64 Image's File Extension\n\nexport function extractImageFileExtensionFromBase64(base64Data) {\n  return base64Data.substring('data:image/'.length, base64Data.indexOf(\";base64\"));\n}\n\nfunction getCroppedImg(image, crop, fileName) {\n  const canvas = document.createElement('canvas');\n  console.log(image);\n  console.log(crop);\n  const scaleX = image.naturalWidth / image.width;\n  const scaleY = image.naturalHeight / image.height;\n  canvas.width = crop.width;\n  canvas.height = crop.height;\n  const ctx = canvas.getContext('2d');\n  ctx.drawImage(image, crop.x, crop.y, crop.width, crop.height, 0, 0, crop.width, crop.height);\n  return new Promise((resolve, reject) => {\n    canvas.toBlob(blob => {\n      if (!blob) {\n        //reject(new Error('Canvas is empty'));\n        console.error('Canvas is empty');\n        return;\n      }\n\n      blob.name = fileName; //window.URL.revokeObjectURL(this.fileUrl);\n\n      let fileUrl = window.URL.createObjectURL(blob);\n      resolve(fileUrl);\n    }, 'image/jpeg');\n  });\n}\n\nexport async function makeClientCrop(imageRef, crop) {\n  if (imageRef && crop.width && crop.height) {\n    const croppedImageURL = await getCroppedImg(imageRef, crop, 'newFile.jpeg');\n    console.log(croppedImageURL); //croppedImageURL.then(return croppedImageURL);\n\n    return croppedImageURL;\n  }\n} // Base64 Image to Canvas with a Crop\n\nexport function image64toCanvasRef(canvasRef, image64, pixelCrop) {\n  const canvas = canvasRef; // document.createElement('canvas');\n\n  canvas.width = pixelCrop.width;\n  canvas.height = pixelCrop.height;\n  const ctx = canvas.getContext('2d');\n  const image = new Image();\n  image.src = image64;\n  console.log(pixelCrop);\n  console.log(image);\n\n  image.onload = function () {\n    console.log(\"check\");\n    ctx.drawImage(image, pixelCrop.x, pixelCrop.y, pixelCrop.width, pixelCrop.height, 0, 0, pixelCrop.width, pixelCrop.height);\n  };\n}","map":{"version":3,"sources":["/home/alvis/Desktop/image-cropper/client/src/ResuableUtils.js"],"names":["base64StringtoFile","base64String","filename","arr","split","mime","match","bstr","atob","n","length","u8arr","Uint8Array","charCodeAt","File","type","downloadBase64File","base64Data","element","document","createElement","setAttribute","style","display","body","appendChild","click","removeChild","extractImageFileExtensionFromBase64","substring","indexOf","getCroppedImg","image","crop","fileName","canvas","console","log","scaleX","naturalWidth","width","scaleY","naturalHeight","height","ctx","getContext","drawImage","x","y","Promise","resolve","reject","toBlob","blob","error","name","fileUrl","window","URL","createObjectURL","makeClientCrop","imageRef","croppedImageURL","image64toCanvasRef","canvasRef","image64","pixelCrop","Image","src","onload"],"mappings":"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","sourcesContent":["// A few JavaScript Functions for Images and Files\n// Author: Justin Mitchel\n// Source: https://kirr.co/ndywes\n\n// Convert a Base64-encoded string to a File object\nexport function base64StringtoFile (base64String, filename) {\n  var arr = base64String.split(','), mime = arr[0].match(/:(.*?);/)[1],\n    bstr = atob(arr[1]), n = bstr.length, u8arr = new Uint8Array(n)\n  while (n--) {\n    u8arr[n] = bstr.charCodeAt(n)\n  }\n  return new File([u8arr], filename, {type: mime})\n}\n\n// Download a Base64-encoded file\n\nexport function downloadBase64File (base64Data, filename) {\n  var element = document.createElement('a')\n  element.setAttribute('href', base64Data)\n  element.setAttribute('download', filename)\n  element.style.display = 'none'\n  document.body.appendChild(element)\n  element.click()\n  document.body.removeChild(element)\n}\n\n// Extract an Base64 Image's File Extension\nexport function extractImageFileExtensionFromBase64 (base64Data) {\n  return base64Data.substring('data:image/'.length, base64Data.indexOf(\";base64\"))\n}\n\n\nfunction getCroppedImg(image, crop, fileName){\n  const canvas = document.createElement('canvas');\n  console.log(image);\n  console.log(crop);\n  const scaleX = image.naturalWidth / image.width;\n  const scaleY = image.naturalHeight / image.height;\n  canvas.width = crop.width;\n  canvas.height = crop.height;\n  const ctx = canvas.getContext('2d');\n\n  ctx.drawImage(\n    image,\n    crop.x,\n    crop.y,\n    crop.width,\n    crop.height,\n    0,\n    0,\n    crop.width,\n    crop.height\n  );\n\n  return new Promise((resolve, reject) => {\n    canvas.toBlob(blob => {\n      if (!blob) {\n        //reject(new Error('Canvas is empty'));\n        console.error('Canvas is empty');\n        return;\n      }\n      blob.name = fileName;\n      //window.URL.revokeObjectURL(this.fileUrl);\n      let fileUrl = window.URL.createObjectURL(blob);\n      resolve(fileUrl);\n    }, 'image/jpeg');\n  });\n}\n\nexport async function makeClientCrop(imageRef, crop){\n  if(imageRef && crop.width && crop.height){\n    const croppedImageURL = await getCroppedImg(imageRef, crop, 'newFile.jpeg')\n    console.log(croppedImageURL);\n    //croppedImageURL.then(return croppedImageURL);\n    return croppedImageURL;\n  }\n}\n\n// Base64 Image to Canvas with a Crop\nexport function image64toCanvasRef (canvasRef, image64, pixelCrop) {\n  const canvas = canvasRef // document.createElement('canvas');\n  canvas.width = pixelCrop.width\n  canvas.height = pixelCrop.height\n  const ctx = canvas.getContext('2d')\n  const image = new Image()\n  image.src = image64\n  console.log(pixelCrop);\n  console.log(image);\n  image.onload = function () {\n    console.log(\"check\");\n    ctx.drawImage(\n      image,\n      pixelCrop.x,\n      pixelCrop.y,\n      pixelCrop.width,\n      pixelCrop.height,\n      0,\n      0,\n      pixelCrop.width,\n      pixelCrop.height\n    )\n  }\n}"]},"metadata":{},"sourceType":"module"}